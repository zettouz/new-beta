-----------------------------------------------------------------------------------------------------------------------------------------
-- VRP
-----------------------------------------------------------------------------------------------------------------------------------------
local Tunnel = module("vrp","lib/Tunnel")
local Proxy = module("vrp","lib/Proxy")
vRP = Proxy.getInterface("vRP")
-----------------------------------------------------------------------------------------------------------------------------------------
-- CONEXÃƒO
-----------------------------------------------------------------------------------------------------------------------------------------
cRP = {}
Tunnel.bindInterface("vrp_social",cRP)
vSERVER = Tunnel.getInterface("vrp_social")
-----------------------------------------------------------------------------------------------------------------------------------------
-- STARTFOCUS
-----------------------------------------------------------------------------------------------------------------------------------------
Citizen.CreateThread(function()
	SetNuiFocus(false,false)
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- CLOSE
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("close",function(data)
	vRP.removeObjects("one")
	SetNuiFocus(false,false)
	SendNUIMessage({ action = "hideMenu" })
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- SOCIAL
-----------------------------------------------------------------------------------------------------------------------------------------
Citizen.CreateThread(function()
	while true do
		Citizen.Wait(4)
		if IsControlJustPressed(0,56) and GetEntityHealth(PlayerPedId()) > 101 then
			SetNuiFocus(true,true)
			SendNUIMessage({ action = "showMenu" })
			vRP.createObjects("amb@code_human_in_bus_passenger_idles@female@tablet@base", "base","prop_cs_tablet",50,28422)
		end
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- REQUESTTWITTER
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("requestTwitter",function(data,cb)
	local result = vSERVER.requestTwitter()
	if result then
		cb(json.encode(result))
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- REQUEST911
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("request911",function(data,cb)
	local result = vSERVER.request911()
	if result then
		cb(json.encode(result))
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- REQUEST112
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("request112",function(data,cb)
	local result = vSERVER.request112()
	if result then
		cb(json.encode(result))
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- REQUESTMECHANIC
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("requestMechanic",function(data,cb)
	local result = vSERVER.requestMechanic()
	if result then
		cb(json.encode(result))
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- REQUESTTAXI
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("requestTaxi",function(data,cb)
	local result = vSERVER.requestTaxi()
	if result then
		cb(json.encode(result))
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- REQUESTANONYMOUS
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("requestAnonymous",function(data,cb)
	local result = vSERVER.requestAnonymous()
	if result then
		cb(json.encode(result))
	end
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- SENDTWITTER
-----------------------------------------------------------------------------------------------------------------------------------------
RegisterNUICallback("sendMessage",function(data,cb)
	vSERVER.sendMessage(data.text,data.page)
end)
-----------------------------------------------------------------------------------------------------------------------------------------
-- UPDATETABLET
-----------------------------------------------------------------------------------------------------------------------------------------
function cRP.updateTablet(action,data)
	SendNUIMessage({ action = action, data = data })
end